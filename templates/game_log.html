<!DOCTYPE html>
<html>
  <head>
    <title>GAME LOG</title>
    <script src="{{ url_for('bower.static', filename='jquery/dist/jquery.min.js') }}"></script>
    <script src="{{ url_for('bower.static', filename='highcharts/highcharts.js') }}"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/stylesheet.css') }}">
  </head>
  <body>
    <div id="game" style="width:66%; height:350px;"></div>
      user: {{player_name}} ({{player_id}})<br/>
      time: {{game_time}}<br/>
      death: {{death_type}}<br/>
      gems: {{gems}}<br/>
      homing daggers: {{homing_daggers}}<br/>
      accuracy: {{accuracy}}%<br/>
      enemies alive: {{enemies_alive}}<br/>
      enemies killed: {{enemies_killed}}<br/>

    <script>
    $(function () {
        var game_time_list = {{game_time_list}}

        $('#game').highcharts({
            chart: {
                backgroundColor: '#282828',
                borderRadius: 10,
                type: 'line'
            },
            title: {
                text: '{{player_name}} | {{game_time}}s',
                align: 'left',
                style: {
                    fontSize: "16px",
                    fontWeight: "bold",
                    color: "#CCC"
                }
            },
            subtitle: {
                text: "Game: {{game_number}}",
                align: 'left',
                style: {
                    fontSize: "14px",
                    color: "#CCC"
                }
            },
            xAxis: {
                title: {
                    text: 'SECONDS'
                },
                categories: game_time_list,
                labels: {
                    //formatter: function () {
                    //    return this.value + "s"
                    //},
                },
                tickInterval: Math.round({{game_time}} / 10)
            },
            legend: {
                itemStyle: {
                    color: "#CCC"
                },
                itemHiddenStyle: {
                    color: "#828282"
                }
            },
            tooltip: {
                formatter: function () {
                    var s = '<b>' + this.x + ' seconds</b>';
                    $.each(this.points, function () {
                        if (this.series.name == 'Accuracy')
                            s += '<br/>' + this.series.name + ': ' + this.y + '%';
                        else
                            s += '<br/>' + this.series.name + ': ' + this.y;
                    });
                    return s;
                },
                shared: true
            },
            yAxis: {
                title: {
                    enabled: false
                }
            },
            plotOptions: {
                series: {
                    marker: {
                        enabled: false
                    }
                    //events: {
                    //    legendItemClick: function (e) {
                    //        var seriesArr=$('#game').highcharts().series;
                    //        var visible = this.visible;
                    //        var index = this.index;
                    //        for(var i=0; i<seriesArr.length;i++)
                    //        {
                    //            if(i!=index)
                    //            {
                    //                seriesArr[i].setVisible(false, false);
                    //            }
                    //        }
                    //
                    //        this.visible=false;  
                    //    }
                    //}
                }
            },
            colors: ['red', 'blue', 'yellow', 'green', 'orange'],
            series: [
                {
                    name: 'Gems',
                    data: {{gems_list}},
                },
                {
                    name: 'Homing',
                    data: {{homing_daggers_list}},
                },
                {
                    name: 'Accuracy',
                    data: {{accuracy_list}},
                },
                {
                    name: 'Enemies Alive',
                    data: {{enemies_alive_list}},
                },
                {
                    name: 'Enemies Killed',
                    data: {{enemies_killed_list}},
                },
            ],
            credits: {
                enabled: false
            },
            exporting: {
                chartOptions: {
                    chart: {
                        style: {
                            fontFamily: 'Helvetica Neue'
                        }
                    }
                }
            }
        });
    });

    Highcharts.setOptions({
        chart: {
            style: {
                fontFamily: 'Helvetica Neue'
            }
        }
    });
    </script>
  </body>
</html>
